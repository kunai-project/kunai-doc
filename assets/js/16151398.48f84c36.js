"use strict";(self.webpackChunkkunai_doc=self.webpackChunkkunai_doc||[]).push([[6338],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>k});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=i.createContext({}),p=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},m=function(e){var t=p(e.components);return i.createElement(s.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),u=p(n),d=r,k=u["".concat(s,".").concat(d)]||u[d]||c[d]||o;return n?i.createElement(k,a(a({ref:t},m),{},{components:n})):i.createElement(k,a({ref:t},m))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,a=new Array(o);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,a[1]=l;for(var p=2;p<o;p++)a[p]=n[p];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8611:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var i=n(7462),r=(n(7294),n(3905));const o={sidebar_position:1e3},a="Compatibility",l={unversionedId:"compatibility",id:"version-0.6.0/compatibility",title:"Compatibility",description:"Kunai has been built to be compatible with all the Linux LTS kernels(from 5.4 to 6.6 at the time of writing). Compatibility is tested in our CI/CD\xa0pipeline at every modification to guarantee stability.",source:"@site/versioned_docs/version-0.6.0/compatibility.md",sourceDirName:".",slug:"/compatibility",permalink:"/docs/compatibility",draft:!1,editUrl:"https://github.com/kunai-project/kunai-doc/tree/main/versioned_docs/version-0.6.0/compatibility.md",tags:[],version:"0.6.0",sidebarPosition:1e3,frontMatter:{sidebar_position:1e3},sidebar:"tutorialSidebar",previous:{title:"Builtin IoC matching",permalink:"/docs/advanced/ioc_configuration"}},s={},p=[{value:"Known issues",id:"known-issues",level:2},{value:"RLIMIT_MEMLOCK",id:"rlimit_memlock",level:3}],m={toc:p},u="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,i.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"compatibility"},"Compatibility"),(0,r.kt)("p",null,"Kunai has been built to be compatible with all the ",(0,r.kt)("strong",{parentName:"p"},"Linux LTS")," kernels(from ",(0,r.kt)("strong",{parentName:"p"},"5.4")," to ",(0,r.kt)("strong",{parentName:"p"},"6.6")," at the time of writing). Compatibility is tested in our ",(0,r.kt)("strong",{parentName:"p"},"CI/CD"),"\xa0pipeline at every modification to guarantee stability. "),(0,r.kt)("p",null,"Even with this rigorous testing it is possible that the program crashes before it can even start monitoring. If that happens to you ",(0,r.kt)("strong",{parentName:"p"},"do not panic"),", it does not mean the tool is bad, it just means your kernel is not supported yet, for a reason ",(0,r.kt)("strong",{parentName:"p"},"we need to understand"),". Having a single binary fitting to several kernels is great for deployment however this has a cost:\xa0the programs needs to be aware of some of the changes made between the kernel versions."),(0,r.kt)("admonition",{title:"multi kernel support",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"If you are interested into getting more knowledge about how kunai makes to supports several kernels at once, you should take a read to the ",(0,r.kt)("a",{parentName:"p",href:"https://nakryiko.com/posts/bpf-core-reference-guide/"},"BPF\xa0CO-RE\xa0reference"))),(0,r.kt)("p",null,"In order to get your kernel version, run the following command ",(0,r.kt)("inlineCode",{parentName:"p"},"uname -r"),", then you can check the following table."),(0,r.kt)("html",null,(0,r.kt)("table",null,(0,r.kt)("tr",null,(0,r.kt)("th",null,"OS"),(0,r.kt)("th",null,"Kernels")),(0,r.kt)("tr",null,(0,r.kt)("td",null,"Ubuntu-20.04"),(0,r.kt)("td",null,"5.4")),(0,r.kt)("tr",null,(0,r.kt)("td",null,"Ubuntu-22.04"),(0,r.kt)("td",null,"5.15")),(0,r.kt)("tr",null,(0,r.kt)("td",null,"Archlinux"),(0,r.kt)("td",null,"5.18 to 6.6")))),(0,r.kt)("admonition",{title:"My kernel is not in the table !",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"If your kernel version:"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"is between the minimum and maximum kernel version, it will ",(0,r.kt)("strong",{parentName:"li"},"very likely")," work without issue"),(0,r.kt)("li",{parentName:"ul"},"is higher than the maximum version supported, cross your fingers, it might work"),(0,r.kt)("li",{parentName:"ul"},"is lower than the minimum version, it is will likely fail at running but try anyway you have nothing to lose"))),(0,r.kt)("admonition",{title:"I tested kunai with success on an OS/kernel not listed above",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Let us know so that we can update the table")),(0,r.kt)("h2",{id:"known-issues"},"Known issues"),(0,r.kt)("h3",{id:"rlimit_memlock"},"RLIMIT_MEMLOCK"),(0,r.kt)("p",null,"Sometimes (mostly happening on old kernels) ",(0,r.kt)("strong",{parentName:"p"},"Kunai")," may fail at loading with the following\nmessage (or something very similar)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[2024-04-11T13:25:35Z WARN  aya::maps] RLIMIT_MEMLOCK value is 8 MiB, not RLIM_INFINITY; if experiencing \nproblems with creating maps, try raising RLIMIT_MEMLOCK either to RLIM_INFINITY or to a higher value \nsufficient for the size of your maps\nError: map error: failed to create map `FN_DEPTH` with code -1\n\nCaused by:\n    0: failed to create map `FN_DEPTH` with code -1\n    1: Operation not permitted (os error 1)\n")),(0,r.kt)("p",null,"You can check the current ",(0,r.kt)("inlineCode",{parentName:"p"},"RLIMIT_MEMLOCK")," with ",(0,r.kt)("inlineCode",{parentName:"p"},"ulimit -l")," and set the limit ",(0,r.kt)("strong",{parentName:"p"},"temporarily")," with\n",(0,r.kt)("inlineCode",{parentName:"p"},"ulimit -l unlimited")),(0,r.kt)("p",null,"You can increase the limit for ",(0,r.kt)("inlineCode",{parentName:"p"},"root")," user permanently in ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/security/limits.conf")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text",metastring:'title="/etc/security/limits.conf"',title:'"/etc/security/limits.conf"'},"# increase root user memlock\nroot        hard    memlock        infinity\nroot        soft    memlock        infinity\n")),(0,r.kt)("p",null,"For more information ",(0,r.kt)("inlineCode",{parentName:"p"},"man limits.conf")))}c.isMDXComponent=!0}}]);